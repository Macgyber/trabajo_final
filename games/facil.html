<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Partes que cuenta - Nivel F√°cil</title>
  <link rel="icon" type="image/svg+xml" href="../asset/svg/logofraccionario.svg">
  <link href="https://fonts.googleapis.com/css2?family=Rubik+Puddles:ital,wght@0,400&display=swap" rel="stylesheet">
  <style>
    * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
    
    body {
      width: 100%;
      min-height: 100vh;
      /*background-image: url('../asset/image/nivel facil interfaz.jpg');*/
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      font-family: 'Arial', sans-serif;
      overflow-x: hidden;
      overflow-y: auto;
    }
    
    /* Pantalla inicial */
    #welcome-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: linear-gradient(180deg,#1B3C53,#456882,#D2C1B6,#F9F3EF);
      background-size: cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 1vh 2vw;
      gap: 1vh;
    }
    
    .welcome-title {
      font-size: 8vw;
      color: white;
      text-shadow: 0.2vw 0.2vw 0.4vw rgba(0, 0, 0, 0.5);
      text-align: center;
      margin: 2vh 0;
      font-weight: bold;
    }
    
    .welcome-subtitle {
      font-size: 3vw;
      color: #f0f0f0;
      text-align: center;
      margin: 3vh 0;
    }
    
    .name-input-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1vh;
      margin: 3vh 0;
    }
    
    .name-input {
      width: 60vw;
      max-width: 400px;
      padding: 1vh 2vw;
      font-size: 3vw;
      border: 0.3vw solid #fff;
      border-radius: 1vw;
      background: rgba(255, 255, 255, 0.9);
      text-align: center;
      outline: none;
      transition: all 0.3s ease;
    }
    
    .name-input:focus {
      border-color: #4CAF50;
      box-shadow: 0 0 1vw rgba(76, 175, 80, 0.5);
      transform: scale(1.02);
    }
    
    .start-button {
      padding: 1vh 4vw;
      font-size: 3vw;
      background: linear-gradient(45deg, #4CAF50, #45a049);
      color: white;
      border: none;
      border-radius: 1vw;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 0.5vw 2vw rgba(0,0,0,0.2);
    }
    
    .start-button:hover {
      transform: scale(1.05);
      box-shadow: 0 1vw 3vw rgba(0,0,0,0.3);
    }
    
    .start-button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
    
    /* Tablero responsive */
    #blackboard-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      z-index: 1;
      display: none;
      align-items: center;
      justify-content: center;
    }
    
    #blackboard-container svg {
      width: 95vw;
      height: 95vh;
      object-fit: contain;
      max-width: 1400px;
      max-height: 900px;
    }
    
        /* Contenedor del juego */
#game-container {
      position: relative;
      z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
      justify-content: center;
      height: 100vh;
      padding: 1vh 2vw;
      gap: 1vh;
      max-width: 60vw;
      max-height: 60vh;
    }
    
    /* Puntuaci√≥n responsive */
    .score-display {
      position: absolute;
      top: 1vh;
      right: 1vw;
      background: rgba(255,255,255,0.95);
      padding: 0.5vh 1vw;
      border-radius: 0.5vw;
      font-size: 1.5vw;
      font-weight: bold;
      z-index: 10;
      box-shadow: 0 0.1vw 0.5vw rgba(0,0,0,0.2);
      display: flex;
      flex-direction: column;
      gap: 0.5vh;
      align-items: center;
    }
    
    .ranking-button {
      padding: 1vh 4vw;
      font-size: 3vw;
      background: rgba(255,255,255,0.15);
      color: #333;
      border: 0.3vw solid #fff;
      border-radius: 1vw;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 0.5vw 2vw rgba(0,0,0,0.10);
    }
    
    .ranking-button:hover {
      box-shadow: 0 1vw 3vw rgba(0,0,0,0.18);
      transform: scale(1.08);
      background: rgba(255,255,255,0.22);
    }
    
        /* Reloj responsive */
#clock-area {
      font-size: 3vw;
  color: #333;
      text-shadow: 0.1vw 0.1vw 0.2vw rgba(0,0,0,0.3);
      margin: 1vh 0;
}

        /* Tablero de juego responsive */
#game-board {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  width: 100%;
      max-width: 70vw;
      gap: 1vw;
}

#left-panel, #right-panel {
      flex: 1 1 30vw;
      min-width: 25vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.5vh;
    }
    
    /* SVG responsive */
    #left-panel svg {
      width: 30vw;
      max-width: 250px;
      height: auto;
    }
    
        /* Opciones responsive */
.option {
  background: white;
      border: 0.2vw solid #4CAF50;
      border-radius: 0.5vw;
      padding: 0.5vh 1vw;
      margin: 0.3vh 0;
  text-align: center;
  cursor: pointer;
      transition: all 0.3s ease;
      font-size: 2vw;
      font-weight: bold;
      box-shadow: 0 0.2vw 0.5vw rgba(0,0,0,0.2);
      width: 100%;
      max-width: 25vw;
}

.option:hover {
      background: #e8f5e8;
      border-color: #45a049;
      transform: scale(1.08);
      box-shadow: 0 1vw 3vw rgba(0,0,0,0.18);
    }
    
    .option.correct {
      background: #4CAF50;
      color: white;
      border-color: #45a049;
      transform: scale(1.05);
    }
    
    .option.wrong {
      background: #f44336;
      color: white;
      border-color: #d32f2f;
      transform: scale(0.95);
    }
    
    /* Animaciones */
.pulse {
  animation: pulseAnim 1s;
}

@keyframes pulseAnim {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

    /* Animaci√≥n de apuntado para las manos */
    .pointing-hand {
      animation: pointingAnim 0.5s ease-in-out infinite;
    }

    @keyframes pointingAnim {
      0% { transform: translateX(0) scale(1); }
      25% { transform: translateX(1vw) scale(1.1); }
      50% { transform: translateX(2vw) scale(1.2); }
      75% { transform: translateX(1vw) scale(1.1); }
      100% { transform: translateX(0) scale(1); }
    }

    .pointing-hand-right {
      animation: pointingAnimRight 0.5s ease-in-out infinite;
    }

    @keyframes pointingAnimRight {
      0% { transform: translateX(0) scale(1); }
      25% { transform: translateX(-1vw) scale(1.1); }
      50% { transform: translateX(-2vw) scale(1.2); }
      75% { transform: translateX(-1vw) scale(1.1); }
      100% { transform: translateX(0) scale(1); }
    }

    /* Pantalla de fin de juego */
    .end-game-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(0,0,0,0.8);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      color: white;
      text-align: center;
      padding: 0.5vh 1vw;
      gap: 0.5vh;
    }
    
    .end-game-title {
      font-size: 5vw;
      margin: 1vh 0;
      text-shadow: 0.2vw 0.2vw 0.4vw rgba(0,0,0,0.8);
    }
    
    .end-game-score {
      font-size: 3.5vw;
      margin: 1.5vh 0;
      color: #4CAF50;
    }
    
    .end-game-time {
      font-size: 2.5vw;
      margin: 1.5vh 0;
      color: #2196F3;
    }
    
    .end-game-button {
      padding: 0.8vh 3vw;
      font-size: 2.2vw;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 0.8vw;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 0.3vh 0.8vw;
    }
    
    .end-game-button:hover {
      transform: scale(1.05);
      background: #45a049;
    }
    
    /* Ranking */
    .ranking-container {
      margin: 1.5vh 0;
      padding: 2vh 3vw;
      background: rgba(255,255,255,0.1);
      border-radius: 1.5vw;
      max-width: 75vw;
      min-width: 55vw;
      min-height: 25vh;
      max-height: 35vh;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    
    .ranking-title {
      font-size: 3.5vw;
      margin: 1.5vh 0;
      color: #FFD700;
      text-shadow: 0.2vw 0.2vw 0.4vw rgba(0,0,0,0.8);
      font-weight: bold;
    }
    
    .ranking-item {
      display: flex;
      align-items: center;
      gap: 1.5vw;
      font-size: 1.8vw;
      margin: 0.5vh 0;
      padding: 0.8vh 1.2vw;
      background: rgba(255,255,255,0.15);
      border-radius: 0.6vw;
      border: 0.15vw solid rgba(255,255,255,0.3);
      box-shadow: 0 0.2vw 0.8vw rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      font-weight: normal;
      text-shadow: 0.1vw 0.1vw 0.2vw rgba(0,0,0,0.3);
      justify-content: flex-start;
      min-height: unset;
      height: auto;
    }
    .ranking-item.ganador {
      background: linear-gradient(90deg, rgba(255,255,200,0.25), rgba(255,255,255,0.18));
      border-width: 0.2vw;
      box-shadow: 0 0.4vw 1.5vw rgba(255,215,0,0.18);
    }
    .ranking-medal {
      font-size: 1.8vw;
      width: 2.5vw;
      min-width: 2.5vw;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .ranking-name {
      font-size: 2vw;
      font-weight: bold;
      color: #1B3C53;
      margin-right: 1.5vw;
    }
    .ranking-item.ganador .ranking-name {
      font-size: 2.2vw;
      color: #C59D00;
    }
    .ranking-points {
      font-size: 1.6vw;
      color: #2196F3;
      font-weight: bold;
      margin-right: 1.5vw;
    }
    .ranking-item.ganador .ranking-points {
      font-size: 1.8vw;
      color: #C59D00;
    }
    .ranking-tiempo-obtenido {
      font-size: 3.5vw;
      color: #000000;
      font-weight: bold;
      margin-left: auto;
      margin-right: 0.8vw;
      letter-spacing: 0.05vw;
      text-align: right;
      min-width: 6vw;
      display: flex;
      align-items: center;
      justify-content: flex-end;
    }
    .ranking-info {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 0;
      flex: 1;
      justify-content: flex-start;
    }
    
    .ranking-item:hover {
      background: rgba(255,255,255,0.25);
      transform: scale(1.02);
      box-shadow: 0 0.4vw 1.2vw rgba(0,0,0,0.4);
      border-color: rgba(255,255,255,0.5);
    }
    
    .ranking-item:nth-child(1) {
      background: linear-gradient(45deg, rgba(255,215,0,0.25), rgba(255,255,255,0.2));
      border-color: #FFD700;
      font-size: 2vw;
    }
    
    .ranking-item:nth-child(2) {
      background: linear-gradient(45deg, rgba(192,192,192,0.25), rgba(255,255,255,0.2));
      border-color: #C0C0C0;
      font-size: 1.9vw;
    }
    
    .ranking-item:nth-child(3) {
      background: linear-gradient(45deg, rgba(205,127,50,0.25), rgba(255,255,255,0.2));
      border-color: #CD7F32;
      font-size: 1.8vw;
    }
    
    /* El contenido ahora se escala autom√°ticamente con el tama√±o de la ventana */

    /* Logo animado */
    .logo-container {
      position: fixed;
      top: 2vh;
      left: 2vw;
      width: clamp(150px, 15vw, 300px);
      height: clamp(150px, 15vw, 300px);
      z-index: 100;
      cursor: pointer;
      transition: all 0.5s ease;
    }

    .logo-container svg {
      width: 100%;
      height: 100%;
      transition: all 0.5s ease;
    }

    /* Animaciones de las piezas del rompecabezas */
    .logo-container:hover #romperojo {
      transform: translate(-10px, -10px) rotate(-5deg);
      transition: all 0.5s ease;
    }

    .logo-container:hover #rompeverde {
      transform: translate(-10px, 10px) rotate(5deg);
      transition: all 0.5s ease;
    }

    .logo-container:hover #rompeazul {
      transform: translate(10px, -10px) rotate(5deg);
      transition: all 0.5s ease;
    }

    .logo-container:hover #rompeamarillo {
      transform: translate(10px, 10px) rotate(-5deg);
      transition: all 0.5s ease;
    }

    /* Estado normal (piezas juntas) */
    #romperojo, #rompeverde, #rompeazul, #rompeamarillo {
      transition: all 0.5s ease;
    }

    /* Efecto de brillo al hover */
    .logo-container:hover svg {
      filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3));
    }

    /* Media queries para responsive */
    @media (max-width: 768px) {
      .logo-container {
        top: 1vh;
        left: 1vw;
        width: clamp(100px, 12vw, 200px);
        height: clamp(100px, 12vw, 200px);
      }
    }

    @media (max-width: 480px) {
      .logo-container {
        top: 0.5vh;
        left: 0.5vw;
        width: clamp(80px, 10vw, 150px);
        height: clamp(80px, 10vw, 150px);
      }
    }

    @media (min-width: 1920px) {
      .logo-container {
        top: 3vh;
        left: 3vw;
        width: clamp(300px, 18vw, 400px);
        height: clamp(300px, 18vw, 400px);
      }
    }
  </style>
</head>
<body>
  <!-- Logo animado -->
  <div class="logo-container">
    <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <filter id="inner-shadow-filter-0" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="10"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="2"/>
          </feComponentTransfer>
          <feFlood flood-color="#ff0000b3" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <filter id="inner-shadow-filter-1" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="10"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="2"/>
          </feComponentTransfer>
          <feFlood flood-color="#006fffb3" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <filter id="inner-shadow-filter-2" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="11"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1.2"/>
          </feComponentTransfer>
          <feFlood flood-color="#38f300" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <filter id="inner-shadow-filter-3" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="16"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1.14"/>
          </feComponentTransfer>
          <feFlood flood-color="#ff7900" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <filter id="brightness-filter-0" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feComponentTransfer>
            <feFuncR type="linear" slope="2"/>
            <feFuncG type="linear" slope="2"/>
            <feFuncB type="linear" slope="2"/>
          </feComponentTransfer>
        </filter>
        <filter id="brightness-filter-1" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feComponentTransfer>
            <feFuncR type="linear" slope="2"/>
            <feFuncG type="linear" slope="2"/>
            <feFuncB type="linear" slope="2"/>
          </feComponentTransfer>
        </filter>
        <filter id="gaussian-blur-filter-0" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="10 10" edgeMode="none"/>
        </filter>
        <filter id="gaussian-blur-filter-1" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="0 0" edgeMode="none"/>
        </filter>
        <filter id="gaussian-blur-filter-2" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="5.8 5.8" edgeMode="none"/>
        </filter>
        <filter id="gaussian-blur-filter-3" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="0.7 0.7" edgeMode="none"/>
        </filter>
        <filter id="gaussian-blur-filter-4" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="0 0" edgeMode="none"/>
        </filter>
        <filter id="gaussian-blur-filter-5" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="0.9 0.9" edgeMode="none"/>
        </filter>
      </defs>
      <g id="logo">
        <rect x="128.335" y="143.246" width="233.473" height="226.774" style="stroke-width: 11px; stroke: rgb(0, 0, 0);" rx="25.403" ry="25.403" id="rompecabezaslogo"/>
        <g id="romperojo">
          <path style="stroke: rgb(134, 1, 18); fill: rgb(255, 86, 86); filter: url(#inner-shadow-filter-0);" d="M 238.385 147.185 L 238.324 180.668 C 238.347 188.814 242.399 190.61 250.479 186.056 C 255.11 183.446 260.653 183.727 265.945 188.546 C 278.342 199.835 260.166 221.836 244.73 207.543 C 243.758 206.643 242.437 206.739 240.767 207.829 C 239.572 208.609 238.701 209.739 238.154 211.22 C 238.154 211.22 238.131 224.098 238.084 249.854 C 238.084 249.854 228.032 249.968 207.929 250.197 C 207.929 250.197 208.509 248.768 209.669 245.91 C 213.005 237.692 209.771 229.433 199.969 221.134 C 194.258 216.299 186.877 215.215 177.826 217.881 C 172.822 219.355 168.721 222.577 165.521 227.549 C 161.451 233.873 160.752 241.361 163.424 250.013 C 163.424 250.013 153.605 249.951 133.968 249.827 C 133.968 249.827 133.983 221.82 134.012 165.805 C 134.014 161.699 135.817 158.01 139.421 154.738 C 142.939 151.544 147.196 149.432 152.192 148.403 C 152.192 148.403 180.923 147.997 238.385 147.185 Z" id="rojo"/>
          <text style="font-family: 'Rubik Puddles'; font-size: 28px; white-space: pre;" transform="matrix(2.551356, 0, 0, 2.785255, -224.370865, -308.125275)" x="143.318" y="187.53" id="letrap">P</text>
          <text style="font-family: 'Rubik Puddles'; font-size: 28px; white-space: pre; filter: url(#gaussian-blur-filter-5);" transform="matrix(2.551356, 0, 0, 2.785255, -223.532303, -313.940521)" x="143.318" y="187.53" id="sombrap">P</text>
        </g>
        <g id="rompeverde">
          <path style="stroke: rgb(33, 137, 98); fill: rgb(0, 255, 176); filter: url(#inner-shadow-filter-2);" d="M 133.68 348.509 L 133.736 260.414 L 165.278 260.6 C 175.043 260.36 178.615 256.826 175.994 249.997 C 173.451 243.371 172.642 238.895 173.568 236.57 C 175.48 231.768 179.738 228.837 186.34 227.777 C 189.524 227.266 192.62 228.168 195.628 230.482 C 200.427 234.173 201.136 240.186 197.756 248.519 C 196.913 250.598 196.601 252.82 196.821 255.185 C 197.062 257.777 199.108 259.387 202.959 260.014 C 202.959 260.014 213.854 259.927 237.447 259.858 C 237.447 259.878 238.403 290.094 238.055 290.404 C 238.055 290.404 236.23 289.734 232.579 288.395 C 232.579 288.395 229.59 288.743 223.611 289.438 C 218.053 290.084 213.454 293.271 209.814 298.998 C 204.761 306.948 204.835 316.369 210.037 327.259 C 211.466 330.251 215.251 332.763 221.393 334.795 C 226.736 336.563 232.323 335.889 238.154 332.773 C 238.154 332.773 238.004 343.192 238.344 364.833 C 238.344 364.833 209.083 365.051 149.92 364.685 C 149.92 364.685 147.083 363.392 141.408 360.807 C 137.017 356.712 134.441 352.613 133.68 348.509 Z" id="verde"/>
          <rect x="143.419" y="301.417" width="59.101" height="19.469" style="fill: rgb(255, 255, 255); stroke: rgb(255, 255, 255); filter: url(#brightness-filter-1);" id="resta"/>
          <rect x="142.859" y="301.368" width="59.101" height="19.469" style="fill: rgb(255, 255, 255); stroke: rgb(255, 255, 255); stroke-width: 1; filter: url(#brightness-filter-1) url(#gaussian-blur-filter-2);" id="sombraresta"/>
        </g>
        <g id="rompeazul">
          <path style="stroke: rgb(12, 126, 142); fill: rgb(58, 228, 255); filter: url(#inner-shadow-filter-1);" d="M 248.546 148.648 L 249.022 177.103 C 258.36 172.46 266.983 174.419 274.892 182.979 C 277.65 185.964 279.395 189.636 280.127 193.992 C 281.435 201.777 279.041 209.299 272.945 216.558 C 267.78 222.708 259.289 224.061 248.64 220.724 C 248.64 220.724 249.088 230.834 248.815 250.947 C 248.815 250.947 261.022 250.943 285.437 250.936 C 287.941 250.935 289.729 252.687 290.803 256.192 C 291.059 257.027 290.32 259.116 288.586 262.457 C 286.365 266.736 286.331 271.557 288.484 276.92 C 290.63 282.265 296.045 284.225 304.73 282.802 C 309.989 281.94 313.487 277.921 315.225 270.743 C 316.165 266.862 314.912 263.07 311.467 259.367 C 310.599 258.434 310.36 257.181 310.751 255.61 C 311.714 251.74 315.276 249.947 321.438 250.232 C 321.438 250.232 333.049 250.341 356.27 250.56 C 356.27 250.56 356.304 223.066 356.373 168.079 C 356.383 160.496 351.956 154.338 343.094 149.606 C 341.888 148.962 339.753 148.661 336.688 148.703 C 336.688 148.703 307.307 148.685 248.546 148.648 Z" id="azul"/>
          <path d="M 306.366 170.771 H 326.507 V 188.214 H 346.056 V 206.183 H 326.507 V 223.626 H 306.366 V 206.183 H 286.817 V 188.214 H 306.366 Z" style="fill: rgb(255, 255, 255); stroke: rgb(255, 255, 255); filter: url(#brightness-filter-0) url(#gaussian-blur-filter-1);" id="suma"/>
          <path d="M 306.211 171.051 H 326.352 V 188.493 H 345.901 V 206.464 H 326.352 V 223.906 H 306.211 V 206.464 H 286.662 V 188.493 H 306.211 Z" style="fill: rgb(255, 255, 255); stroke: rgb(255, 255, 255); filter: url(#brightness-filter-0) url(#gaussian-blur-filter-0); stroke-width: 1;" id="sombrasuma"/>
        </g>
        <g id="rompeamarillo">
          <path style="stroke: rgb(158, 142, 0); fill: rgb(255, 233, 103); filter: url(#inner-shadow-filter-3);" d="M 276.463 260.432 L 248.074 260.045 L 247.663 298.523 C 243.6 303.335 238.687 303.612 232.923 299.354 C 232.462 299.013 230.727 298.935 227.718 299.118 C 223.667 299.364 220.284 301.607 217.569 305.846 C 214.872 310.056 215.24 315.042 218.673 320.805 C 221.259 325.145 226.143 326.437 233.326 324.679 C 235.294 324.197 237.156 323.318 238.914 322.041 C 240.388 320.97 242.205 320.835 244.364 321.635 C 248.015 322.988 249.29 326.727 248.188 332.852 C 248.188 332.852 247.82 342.967 248.436 364.444 C 248.436 364.444 278.136 364.527 337.537 364.693 C 338.634 364.696 341.453 363.825 345.994 362.08 C 351.304 360.04 354.476 355.318 355.511 347.916 C 355.511 347.916 355.482 318.8 355.424 260.568 C 355.424 260.568 344.467 260.668 322.552 260.869 C 322.552 260.869 323.163 262.446 324.386 265.599 C 324.386 265.599 324.317 267.994 324.18 272.785 C 323.925 281.703 318.478 289.79 306.499 292.878 C 298.402 294.966 289.374 292.989 280.064 285.194 C 273.621 279.8 272.714 271.214 276.463 260.432 Z" id="amarillo"/>
          <text style="font-family: 'Rubik Puddles'; font-size: 28px; white-space: pre; filter: url(#brightness-filter-1) url(#gaussian-blur-filter-4);" transform="matrix(2.831103, 0, 0, 2.849609, -129.525803, -176.712234)" x="143.318" y="187.53" id="letrac">C</text>
          <text style="font-family: 'Rubik Puddles'; font-size: 28px; white-space: pre; filter: url(#brightness-filter-1) url(#gaussian-blur-filter-3);" transform="matrix(2.831103, 0, 0, 2.849609, -133.741745, -177.835114)" x="143.318" y="187.53" id="sombrac">C</text>
        </g>
      </g>
    </svg>
  </div>

  <!-- Pantalla de bienvenida -->
  <div id="welcome-screen">
    <h1 class="welcome-title">üéì Juego de Fracciones</h1>
    <p class="welcome-subtitle">¬°Aprende fracciones de manera divertida!</p>
    
    <div class="name-input-container">
      <div style="display: flex; align-items: center; justify-content: center; gap: 1vw;">
        <span style="font-size: 8vw;" class="pointing-hand">üëâ</span>
        <input type="text" 
             id="player-name" 
             class="name-input" 
             placeholder="Ingresa tu nick (¬°usa siempre el mismo!)"
             maxlength="20"
             pattern="[A-Za-z0-9\s]+"
             title="Solo letras, n√∫meros y espacios">
        <span style="font-size: 8vw;" class="pointing-hand-right">üëà</span>
      </div>
      <button id="start-game" class="start-button" disabled>¬°Comenzar!</button>
      <button id="ranking-btn" class="ranking-button">üìä Ver Ranking</button>
      <div id="nick-hint" style="font-size:2vw; color:#B80040; margin-top:1vh;">Usa siempre el mismo nick para mejorar tu ranking y escalar en los niveles</div>
    </div>
  </div>

  <!-- Tablero moderno -->
  <div id="blackboard-container">
    <svg viewBox="0 0 500 500" style="width: 100%; height: 100%; object-fit: contain;">
      <defs>
        <filter id="inner-shadow-filter-1" bx:preset="inner-shadow 1 0 0 10 0.5 rgba(0,0,0,0.7)" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="10"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1"/>
          </feComponentTransfer>
          <feFlood flood-color="rgba(0,0,0,0.7)" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <filter id="inner-shadow-filter-0" bx:preset="inner-shadow 1 0 0 10 0.5 rgba(0,0,0,0.7)" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="10"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1"/>
          </feComponentTransfer>
          <feFlood flood-color="rgba(0,0,0,0.7)" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <radialGradient gradientUnits="userSpaceOnUse" cx="242.912" cy="186.989" r="211.122" id="gradient-0">
          <stop offset="0" style="stop-color: rgb(53, 118, 70);"/>
          <stop offset="1" style="stop-color: rgb(0% 10.127% 0%);"/>
        </radialGradient>
        <filter id="morphology-filter-0" bx:preset="morphology 1 dilate 4" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feMorphology operator="dilate" radius="4"/>
        </filter>
        <filter id="inner-shadow-filter-4" bx:preset="inner-shadow 1 0 0 10 0.5 #ffc082" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="10"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1"/>
          </feComponentTransfer>
          <feFlood flood-color="#ffc082" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <filter id="sharpen-filter-0" bx:preset="sharpen 1 0.4" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feConvolveMatrix order="3" kernelMatrix="-4,-4,-4,-4,33,-4,-4,-4,-4"/>
        </filter>
        <filter id="inner-shadow-filter-2" bx:preset="inner-shadow 1 0 0 3 0.5 rgba(0,0,0,0.7)" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="3"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1"/>
          </feComponentTransfer>
          <feFlood flood-color="rgba(0,0,0,0.7)" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <filter id="sharpen-filter-1" bx:preset="sharpen 1 0" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feConvolveMatrix order="3" kernelMatrix="0,0,0,0,1,0,0,0,0"/>
        </filter>
        <filter id="inner-shadow-filter-3" bx:preset="inner-shadow 1 0 0 10 0.5 rgba(0,0,0,0.7)" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="10"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1"/>
          </feComponentTransfer>
          <feFlood flood-color="rgba(0,0,0,0.7)" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
      </defs>
      <path style="fill: rgb(106, 46, 27); stroke: rgb(106, 46, 27); filter: url(&quot;#inner-shadow-filter-1&quot;);" d="M 17.441 82.386 L 7.734 90.855 L 7.728 298.338 L 456.44 298.498 L 469.424 291.817 L 469.699 82.928 L 17.441 82.386 Z" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
      <rect x="16.926" y="82.746" width="452.201" height="209.272" style="stroke-width: 1; fill: rgb(212, 107, 56); stroke: rgb(212, 107, 56); filter: url(&quot;#inner-shadow-filter-0&quot;);" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
      <rect x="31.79" y="91.737" width="422.245" height="190.503" style="stroke: rgb(4, 34, 13); fill: url(&quot;#gradient-0&quot;); filter: url(&quot;#morphology-filter-0&quot;);" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
      <rect x="42.718" y="268.953" width="72.36" height="7.014" style="stroke: rgb(0, 0, 0); fill: rgb(243, 237, 107); filter: url(&quot;#inner-shadow-filter-4&quot;) url(&quot;#sharpen-filter-0&quot;);" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
      <rect x="25.07" y="276.014" width="436.076" height="10.371" style="fill: rgb(159, 66, 34); stroke: rgb(159, 66, 34); filter: url(&quot;#inner-shadow-filter-2&quot;) url(&quot;#sharpen-filter-1&quot;);" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
      <rect x="38.381" y="255.996" width="81.439" height="14.021" style="fill: rgb(120, 52, 29); stroke: rgb(120, 52, 29); filter: url(&quot;#inner-shadow-filter-3&quot;);" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
    </svg>
  </div>

  <!-- Contenedor del juego -->
  <div id="game-container" style="display: none;">
    <div class="score-display">
      Puntuaci√≥n: <span id="score">0</span>
    </div>
    
    <div id="clock-area">
      ‚è∞ <span id="timer">00:00:00</span>
    </div>
    
    <div id="game-board">
      <div id="left-panel">
        <!-- Aqu√≠ se inserta el SVG de la fracci√≥n -->
      </div>
      <div id="right-panel">
        <div class="option" id="option1">1/9</div>
        <div class="option" id="option2">2/9</div>
        <div class="option" id="option3">3/9</div>
      </div>
    </div>
  </div>

  <!-- Audio -->
  <audio id="bg-music" src="../asset/music/musicadeambientacion3.mp3" loop></audio>
  <audio id="sound-correct" src="../asset/music/correcto.mp3"></audio>
  <audio id="sound-wrong" src="../asset/music/incorrecto.mp3"></audio>
  <audio id="clickenunboton" src="../asset/music/clickenunboton.mp3"></audio>


  <script>
    // Aqu√≠ guardamos las cosas importantes del juego
    let puntuacion = 0
    let preguntaActual = 0
    let nombreJugador = ''
    let tiempoInicio = 0
    let relojJuego = null
    let listaMejores = []
    
    // Las preguntas que vamos a mostrar
    const preguntas = [
      {
        svg: `
          <svg width="200" height="200" viewBox="0 0 200 200">
            <!-- El c√≠rculo principal -->
            <circle cx="100" cy="100" r="90" fill="#eee" stroke="black" stroke-width="2"/>
            
            <!-- Las l√≠neas que dividen el c√≠rculo en 9 partes -->
            <line x1="100" y1="100" x2="100" y2="10" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="55" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="190" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="100" y2="190" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="10" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="55" stroke="black" stroke-width="2"/>
            
            <!-- Las partes pintadas (3 de 9) -->
            <path d="M100,100 L100,10 A90,90 0 0,1 178,55 Z" fill="#4caf50" stroke="black" stroke-width="1"/>
            <path d="M100,100 L178,55 A90,90 0 0,1 190,100 Z" fill="#4caf50" stroke="black" stroke-width="1"/>
            <path d="M100,100 L190,100 A90,90 0 0,1 178,145 Z" fill="#4caf50" stroke="black" stroke-width="1"/>
          </svg>
        `,
        respuestaCorrecta: 'option3',
        respuesta: '3/9'
      },
      {
        svg: `
          <svg width="200" height="200" viewBox="0 0 200 200">
            <!-- El c√≠rculo principal -->
            <circle cx="100" cy="100" r="90" fill="#eee" stroke="black" stroke-width="2"/>
            
            <!-- Las l√≠neas que dividen el c√≠rculo en 9 partes -->
            <line x1="100" y1="100" x2="100" y2="10" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="55" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="190" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="100" y2="190" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="10" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="55" stroke="black" stroke-width="2"/>
            
            <!-- Las partes pintadas (2 de 9) -->
            <path d="M100,100 L100,10 A90,90 0 0,1 178,55 Z" fill="#ff9800" stroke="black" stroke-width="1"/>
            <path d="M100,100 L178,55 A90,90 0 0,1 190,100 Z" fill="#ff9800" stroke="black" stroke-width="1"/>
          </svg>
        `,
        respuestaCorrecta: 'option2',
        respuesta: '2/9'
      },
      {
        svg: `
          <svg width="200" height="200" viewBox="0 0 200 200">
            <!-- El c√≠rculo principal -->
            <circle cx="100" cy="100" r="90" fill="#eee" stroke="black" stroke-width="2"/>
            
            <!-- Las l√≠neas que dividen el c√≠rculo en 9 partes -->
            <line x1="100" y1="100" x2="100" y2="10" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="55" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="190" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="100" y2="190" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="10" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="55" stroke="black" stroke-width="2"/>
            
            <!-- La parte pintada (1 de 9) -->
            <path d="M100,100 L100,10 A90,90 0 0,1 178,55 Z" fill="#2196f3" stroke="black" stroke-width="1"/>
          </svg>
        `,
        respuestaCorrecta: 'option1',
        respuesta: '1/9'
      }
    ]

    // Cuando la p√°gina se carga, hacemos esto
    document.addEventListener('DOMContentLoaded', () => {
      cargarRanking()
      prepararPantallaBienvenida()
      const btnRanking = document.getElementById('ranking-btn')
      if (btnRanking) {
        btnRanking.addEventListener('click', () => {
          // Mostramos la pantalla de ranking aunque no hayas jugado
          mostrarPantallaFinal(puntuacion, Math.floor((Date.now() - tiempoInicio) / 1000))
        })
      }
    })

    // Preparar la pantalla donde el jugador pone su nombre
    function prepararPantallaBienvenida() {
      const entradaNombre = document.getElementById('player-name')
      const botonComenzar = document.getElementById('start-game')
      const botonRanking = document.getElementById('ranking-btn')
      
      entradaNombre.addEventListener('input', (e) => {
        const nombre = e.target.value.trim()
        botonComenzar.disabled = nombre.length < 2
        
        // Solo permitir letras, n√∫meros y espacios
        const nombreValido = nombre.replace(/[^A-Za-z0-9\s]/g, '')
        e.target.value = nombreValido
      })
      
      botonComenzar.addEventListener('click', comenzarJuego)
      
      // BOT√ìN DE RANKING (puedes quitar este bloque si no lo necesitas)
      botonRanking.addEventListener('click', () => {
        // Mostramos la pantalla de ranking desde la bienvenida
        mostrarPantallaRanking()
      })
    }

    // Empezar el juego
    function comenzarJuego() {
      nombreJugador = document.getElementById('player-name').value.trim()
      if (nombreJugador.length < 2) return
      
      // Esconder la pantalla de bienvenida
      document.getElementById('welcome-screen').style.display = 'none'
      document.getElementById('game-container').style.display = 'flex'
      document.getElementById('blackboard-container').style.display = 'flex'
      
      // Empezar a contar el tiempo
      tiempoInicio = Date.now()
      actualizarReloj()
      relojJuego = setInterval(actualizarReloj, 10)
      
      // Mostrar la primera pregunta
      cargarPregunta()
      prepararSonidos()
    }

    // Actualizar el reloj que muestra el tiempo
    function actualizarReloj() {
      const tiempoTranscurrido = Date.now() - tiempoInicio
      const minutos = Math.floor(tiempoTranscurrido / 60000)
      const segundos = Math.floor((tiempoTranscurrido % 60000) / 1000)
      const milesimas = Math.floor((tiempoTranscurrido % 1000) / 10)
      document.getElementById('timer').textContent = 
        `${minutos.toString().padStart(2, '0')}:${segundos.toString().padStart(2, '0')}:${milesimas.toString().padStart(2, '0')}`
    }

    // Mostrar una pregunta
    function cargarPregunta() {
      if (preguntaActual >= preguntas.length) {
        terminarJuego()
        return
      }
      
      const pregunta = preguntas[preguntaActual]
      const panelIzquierdo = document.getElementById('left-panel')
      panelIzquierdo.innerHTML = pregunta.svg
      
      // Limpiar las opciones anteriores
      document.querySelectorAll('.option').forEach(opcion => {
        opcion.classList.remove('correct', 'wrong')
        opcion.style.pointerEvents = 'auto'
      })
    }

    // Preparar los sonidos del juego
    function prepararSonidos() {
      const musicaFondo = document.getElementById('bg-music')
      const sonidoCorrecto = document.getElementById('sound-correct')
      const sonidoIncorrecto = document.getElementById('sound-wrong')
      
      musicaFondo.volume = 0.3
      musicaFondo.play().catch(e => console.log('No se pudo reproducir la m√∫sica'))
      
      sonidoCorrecto.volume = 0.5
      sonidoIncorrecto.volume = 0.5
    }

    // Cuando el jugador hace clic en una opci√≥n
    document.querySelectorAll('.option').forEach(opcion => {
      opcion.addEventListener('click', e => {
        const id = e.currentTarget.id
        const pregunta = preguntas[preguntaActual]
        
        if (id === pregunta.respuestaCorrecta) {
          manejarRespuestaCorrecta(e.currentTarget)
        } else {
          manejarRespuestaIncorrecta(e.currentTarget, pregunta.respuestaCorrecta)
        }
      })
    })

    // Cuando la respuesta es correcta
    function manejarRespuestaCorrecta(opcionSeleccionada) {
      document.getElementById('sound-correct').play()
      opcionSeleccionada.classList.add('correct')
      puntuacion += 10
      document.getElementById('score').textContent = puntuacion
      animarReloj('green')
      
      setTimeout(() => {
        preguntaActual++
        cargarPregunta()
      }, 1500)
    }

    // Cuando la respuesta es incorrecta
    function manejarRespuestaIncorrecta(opcionSeleccionada, opcionCorrectaId) {
      document.getElementById('sound-wrong').play()
      opcionSeleccionada.classList.add('wrong')
      document.getElementById(opcionCorrectaId).classList.add('correct')
      animarReloj('red')
      
      // No permitir m√°s clics
      document.querySelectorAll('.option').forEach(opcion => {
        opcion.style.pointerEvents = 'none'
      })
      
      setTimeout(() => {
        preguntaActual++
        cargarPregunta()
      }, 2000)
    }

    // Hacer que el reloj se anime cuando respondes
    function animarReloj(color) {
      const reloj = document.getElementById('clock-area')
      reloj.style.color = color
      reloj.classList.add('pulse')
      setTimeout(() => reloj.classList.remove('pulse'), 1000)
    }

    // Terminar el juego
    function terminarJuego() {
      clearInterval(relojJuego)
      const tiempoJuego = Date.now() - tiempoInicio
      
      // Guardar el resultado
      guardarResultado(nombreJugador, puntuacion, tiempoJuego)
      
      // Mostrar la pantalla final
      mostrarPantallaFinal(puntuacion, tiempoJuego)
    }

    // Mostrar la pantalla cuando termina el juego
    function mostrarPantallaFinal(puntuacion, tiempo) {
      const contenedorJuego = document.getElementById('game-container')
      document.getElementById('blackboard-container').style.display = 'none'
      const minutos = Math.floor(tiempo / 60000)
      const segundos = Math.floor((tiempo % 60000) / 1000)
      const milesimas = Math.floor((tiempo % 1000) / 10)
      const tiempoTexto = `${minutos}:${segundos.toString().padStart(2, '0')}:${milesimas.toString().padStart(2, '0')}`
      
      contenedorJuego.innerHTML = `
        <div class="end-game-screen">
          <h1 class="end-game-title">¬°Juego Terminado!</h1>
          <div class="end-game-score">Puntuaci√≥n: ${puntuacion}</div>
          <div class="end-game-time">Tiempo: ${tiempoTexto}</div>
          
          <div class="ranking-container">
            <h2 class="ranking-title">üèÜ TABLERO DE LA FAMA</h2>
            ${generarHTMLRanking()}
          </div>
          
          <button onclick="location.reload()" class="end-game-button">Jugar de Nuevo</button>
          <button onclick="window.location.href='juego.html'" class="end-game-button">Volver al Men√∫</button>
        </div>
      `
    }

        // Crear la lista de mejores jugadores del nivel F√ÅCIL
    function generarHTMLRanking() {
      const rankingFacil = JSON.parse(localStorage.getItem('facilRanking') || '[]')
      let html = ''
      if (rankingFacil.length > 0) {
        html += rankingFacil.slice(0, 3).map((jugador, indice) => {
          const minutos = Math.floor(jugador.time / 60000)
          const segundos = Math.floor((jugador.time % 60000) / 1000)
          const milesimas = Math.floor((jugador.time % 1000) / 10)
          const tiempoTexto = `(${minutos}:${segundos.toString().padStart(2, '0')}:${milesimas.toString().padStart(2, '0')})`
          let medalla = ''
          if (indice === 0) medalla = 'ü•á'
          else if (indice === 1) medalla = 'ü•à'
          else if (indice === 2) medalla = 'ü•â'
          const ganadorClass = indice < 3 ? 'ganador' : ''
          return `
            <div class="ranking-item ${ganadorClass}">
              <span class="ranking-medal">${medalla}</span>
              <span class="ranking-name">${jugador.name}</span>
              <span class="ranking-points">${jugador.score} puntos</span>
              <span class="ranking-tiempo-obtenido">${tiempoTexto}</span>
            </div>
          `
        }).join('')
      } else {
        html += '<div class="ranking-item" style="text-align: center; font-size: 2.5vw;">üåü ¬°S√© el primero en aparecer aqu√≠! üåü</div>'
      }
      return html
    }

    // Guardar el resultado en la memoria del navegador
    function guardarResultado(nombre, puntuacion, tiempo) {
      const resultado = { name: nombre, score: puntuacion, time: tiempo, date: new Date().toISOString() }
      const rankingExistente = JSON.parse(localStorage.getItem('facilRanking') || '[]')
      // Buscar si el nick ya existe
      const idx = rankingExistente.findIndex(j => j.name.toLowerCase() === nombre.toLowerCase())
      if (idx !== -1) {
        // Si el nuevo puntaje es mejor, o el tiempo es menor (en empate de puntos), actualiza
        if (
          puntuacion > rankingExistente[idx].score ||
          (puntuacion === rankingExistente[idx].score && tiempo < rankingExistente[idx].time)
        ) {
          rankingExistente[idx] = resultado
        }
    } else {
        rankingExistente.push(resultado)
      }
      rankingExistente.sort((a, b) => {
        if (b.score !== a.score) return b.score - a.score
        return a.time - b.time
      })
      const mejores10 = rankingExistente.slice(0, 10)
      localStorage.setItem('facilRanking', JSON.stringify(mejores10))
      listaMejores = mejores10
    }

    // Cargar la lista de mejores jugadores del nivel F√ÅCIL
    function cargarRanking() {
      listaMejores = JSON.parse(localStorage.getItem('facilRanking') || '[]')
    }

    // Mostrar solo la pantalla de ranking (sin jugar)
    function mostrarPantallaRanking() {
      // Esconder la pantalla de bienvenida
      document.getElementById('welcome-screen').style.display = 'none'
      document.getElementById('blackboard-container').style.display = 'none'
      
      // Crear pantalla de ranking
      const rankingScreen = document.createElement('div')
      rankingScreen.className = 'end-game-screen'
      rankingScreen.innerHTML = `
        <h1 class="end-game-title">üèÜ TABLERO DE LA FAMA</h1>
        
        <div class="ranking-container">
          ${generarHTMLRanking()}
        </div>
        
        <button onclick="location.reload()" class="end-game-button">Volver</button>
      `
      document.body.appendChild(rankingScreen)
    }

    // FUNCI√ìN PARA AGREGAR CONTENIDO AL LOCALSTORAGE (puedes quitar este bloque)
    function agregarDatosPrueba() {
      // Datos de ejemplo para el nivel F√ÅCIL
      const datosFacil = [
        { name: 'Ana', score: 30, time: 85, date: new Date().toISOString() },
        { name: 'Carlos', score: 20, time: 120, date: new Date().toISOString() },
        { name: 'Mar√≠a', score: 10, time: 180, date: new Date().toISOString() }
      ]
      
      // Datos de ejemplo para el nivel INTERMEDIO
      const datosIntermedio = [
        { name: 'Pedro', score: 25, time: 150, date: new Date().toISOString() },
        { name: 'Laura', score: 15, time: 195, date: new Date().toISOString() },
        { name: 'Juan', score: 5, time: 260, date: new Date().toISOString() }
      ]
      
      // Datos de ejemplo para el nivel DIF√çCIL
      const datosDificil = [
        { name: 'Sof√≠a', score: 20, time: 225, date: new Date().toISOString() },
        { name: 'Diego', score: 10, time: 270, date: new Date().toISOString() },
        { name: 'Carmen', score: 5, time: 315, date: new Date().toISOString() }
      ]
      
      // Guardar en localStorage
      localStorage.setItem('facilRanking', JSON.stringify(datosFacil))
      localStorage.setItem('intermedioRanking', JSON.stringify(datosIntermedio))
      localStorage.setItem('dificilRanking', JSON.stringify(datosDificil))
      
      console.log('Datos de prueba agregados al localStorage')
    }

    // Para agregar datos de prueba, ejecuta esto en la consola del navegador:
    // agregarDatosPrueba()
  </script>
</body>
</html>
