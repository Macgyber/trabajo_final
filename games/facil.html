<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nivel Fácil - Juego de Fracciones</title>
  <style>
    * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
    
    body {
      width: 100%;
      min-height: 100vh;
      background-image: url('../asset/image/nivel facil interfaz.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      font-family: 'Arial', sans-serif;
      overflow-x: hidden;
      overflow-y: auto;
    }
    
    /* Pantalla inicial */
    #welcome-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: linear-gradient(180deg,#1B3C53,#456882,#D2C1B6,#F9F3EF);
      background-size: cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 1vh 2vw;
      gap: 1vh;
    }
    
    .welcome-title {
      font-size: 8vw;
      color: white;
      text-shadow: 0.2vw 0.2vw 0.4vw rgba(0, 0, 0, 0.5);
      text-align: center;
      margin: 2vh 0;
      font-weight: bold;
    }
    
    .welcome-subtitle {
      font-size: 3vw;
      color: #f0f0f0;
      text-align: center;
      margin: 3vh 0;
    }
    
    .name-input-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1vh;
      margin: 3vh 0;
    }
    
    .name-input {
      width: 60vw;
      max-width: 400px;
      padding: 1vh 2vw;
      font-size: 3vw;
      border: 0.3vw solid #fff;
      border-radius: 1vw;
      background: rgba(255, 255, 255, 0.9);
      text-align: center;
      outline: none;
      transition: all 0.3s ease;
    }
    
    .name-input:focus {
      border-color: #4CAF50;
      box-shadow: 0 0 1vw rgba(76, 175, 80, 0.5);
      transform: scale(1.02);
    }
    
    .start-button {
      padding: 1vh 4vw;
      font-size: 3vw;
      background: linear-gradient(45deg, #4CAF50, #45a049);
      color: white;
      border: none;
      border-radius: 1vw;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 0.5vw 2vw rgba(0,0,0,0.2);
    }
    
    .start-button:hover {
      transform: scale(1.05);
      box-shadow: 0 1vw 3vw rgba(0,0,0,0.3);
    }
    
    .start-button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
    
    /* Tablero responsive */
    #blackboard-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    #blackboard-container svg {
      width: 95vw;
      height: 95vh;
      object-fit: contain;
      max-width: 1400px;
      max-height: 900px;
    }
    
        /* Contenedor del juego */
    #game-container {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      padding: 1vh 2vw;
      gap: 1vh;
      max-width: 60vw;
      max-height: 60vh;
    }
    
    /* Puntuación responsive */
    .score-display {
      position: absolute;
      top: 1vh;
      right: 1vw;
      background: rgba(255,255,255,0.95);
      padding: 0.5vh 1vw;
      border-radius: 0.5vw;
      font-size: 1.5vw;
      font-weight: bold;
      z-index: 10;
      box-shadow: 0 0.1vw 0.5vw rgba(0,0,0,0.2);
      display: flex;
      flex-direction: column;
      gap: 0.5vh;
      align-items: center;
    }
    
    .ranking-button {
      padding: 1vh 4vw;
      font-size: 3vw;
      background: rgba(255,255,255,0.15);
      color: #333;
      border: 0.3vw solid #fff;
      border-radius: 1vw;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 0.5vw 2vw rgba(0,0,0,0.10);
    }
    
    .ranking-button:hover {
      box-shadow: 0 1vw 3vw rgba(0,0,0,0.18);
      transform: scale(1.08);
      background: rgba(255,255,255,0.22);
    }
    
        /* Reloj responsive */
    #clock-area {
      font-size: 3vw;
      color: #333;
      text-shadow: 0.1vw 0.1vw 0.2vw rgba(0,0,0,0.3);
      margin: 1vh 0;
    }

        /* Tablero de juego responsive */
    #game-board {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      width: 100%;
      max-width: 70vw;
      gap: 1vw;
    }

    #left-panel, #right-panel {
      flex: 1 1 30vw;
      min-width: 25vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.5vh;
    }
    
    /* SVG responsive */
    #left-panel svg {
      width: 30vw;
      max-width: 250px;
      height: auto;
    }
    
        /* Opciones responsive */
    .option {
      background: white;
      border: 0.2vw solid #4CAF50;
      border-radius: 0.5vw;
      padding: 0.5vh 1vw;
      margin: 0.3vh 0;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 2vw;
      font-weight: bold;
      box-shadow: 0 0.2vw 0.5vw rgba(0,0,0,0.2);
      width: 100%;
      max-width: 25vw;
    }

.option:hover {
      background: #e8f5e8;
      border-color: #45a049;
      transform: scale(1.08);
      box-shadow: 0 1vw 3vw rgba(0,0,0,0.18);
    }
    
    .option.correct {
      background: #4CAF50;
      color: white;
      border-color: #45a049;
      transform: scale(1.05);
    }
    
    .option.wrong {
      background: #f44336;
      color: white;
      border-color: #d32f2f;
      transform: scale(0.95);
    }
    
    /* Animaciones */
.pulse {
  animation: pulseAnim 1s;
}

@keyframes pulseAnim {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

    /* Pantalla de fin de juego */
    .end-game-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(0,0,0,0.8);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      color: white;
      text-align: center;
      padding: 1vh 2vw;
      gap: 1vh;
    }
    
    .end-game-title {
      font-size: 8vw;
      margin: 2vh 0;
      text-shadow: 0.2vw 0.2vw 0.4vw rgba(0,0,0,0.8);
    }
    
    .end-game-score {
      font-size: 6vw;
      margin: 3vh 0;
      color: #4CAF50;
    }
    
    .end-game-time {
      font-size: 4vw;
      margin: 3vh 0;
      color: #2196F3;
    }
    
    .end-game-button {
      padding: 1vh 4vw;
      font-size: 3vw;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 1vw;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 0.5vh 1vw;
    }
    
    .end-game-button:hover {
      transform: scale(1.05);
      background: #45a049;
    }
    
    /* Ranking */
    .ranking-container {
      margin: 3vh 0;
      padding: 1vh 2vw;
      background: rgba(255,255,255,0.1);
      border-radius: 1vw;
      max-height: 30vh;
      overflow-y: auto;
    }
    
    .ranking-title {
      font-size: 5vw;
      margin: 3vh 0;
      color: #FFD700;
      text-shadow: 0.2vw 0.2vw 0.4vw rgba(0,0,0,0.8);
      font-weight: bold;
    }
    
    .ranking-item {
      font-size: 2.5vw;
      margin: 0.8vh 0;
      padding: 1vh 1.5vw;
      background: rgba(255,255,255,0.15);
      border-radius: 0.8vw;
      border: 0.2vw solid rgba(255,255,255,0.3);
      box-shadow: 0 0.3vw 1vw rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      font-weight: bold;
      text-shadow: 0.1vw 0.1vw 0.2vw rgba(0,0,0,0.3);
    }
    
    .ranking-item:hover {
      background: rgba(255,255,255,0.25);
      transform: scale(1.02);
      box-shadow: 0 0.5vw 1.5vw rgba(0,0,0,0.4);
      border-color: rgba(255,255,255,0.5);
    }
    
    .ranking-item:nth-child(1) {
      background: linear-gradient(45deg, rgba(255,215,0,0.25), rgba(255,255,255,0.2));
      border-color: #FFD700;
      font-size: 2.8vw;
    }
    
    .ranking-item:nth-child(2) {
      background: linear-gradient(45deg, rgba(192,192,192,0.25), rgba(255,255,255,0.2));
      border-color: #C0C0C0;
      font-size: 2.7vw;
    }
    
    .ranking-item:nth-child(3) {
      background: linear-gradient(45deg, rgba(205,127,50,0.25), rgba(255,255,255,0.2));
      border-color: #CD7F32;
      font-size: 2.6vw;
    }
    
    /* El contenido ahora se escala automáticamente con el tamaño de la ventana */
  </style>
</head>
<body>
  <!-- Pantalla de bienvenida -->
  <div id="welcome-screen">
    <h1 class="welcome-title">🎓 Juego de Fracciones</h1>
    <p class="welcome-subtitle">¡Aprende fracciones de manera divertida!</p>
    
    <div class="name-input-container">
      <input type="text" 
             id="player-name" 
             class="name-input" 
             placeholder="Ingresa tu nombre"
             maxlength="20"
             pattern="[A-Za-z0-9\s]+"
             title="Solo letras, números y espacios">
      <button id="start-game" class="start-button" disabled>¡Comenzar!</button>
      <button id="ranking-btn" class="ranking-button">📊 Ver Ranking</button>
    </div>
  </div>

  <!-- Tablero moderno -->
  <div id="blackboard-container">
    <svg viewBox="0 0 500 500" style="width: 100%; height: 100%; object-fit: contain;">
      <defs>
        <filter id="inner-shadow-filter-1" bx:preset="inner-shadow 1 0 0 10 0.5 rgba(0,0,0,0.7)" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="10"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1"/>
          </feComponentTransfer>
          <feFlood flood-color="rgba(0,0,0,0.7)" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <filter id="inner-shadow-filter-0" bx:preset="inner-shadow 1 0 0 10 0.5 rgba(0,0,0,0.7)" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="10"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1"/>
          </feComponentTransfer>
          <feFlood flood-color="rgba(0,0,0,0.7)" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <radialGradient gradientUnits="userSpaceOnUse" cx="242.912" cy="186.989" r="211.122" id="gradient-0">
          <stop offset="0" style="stop-color: rgb(53, 118, 70);"/>
          <stop offset="1" style="stop-color: rgb(0% 10.127% 0%);"/>
        </radialGradient>
        <filter id="morphology-filter-0" bx:preset="morphology 1 dilate 4" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feMorphology operator="dilate" radius="4"/>
        </filter>
        <filter id="inner-shadow-filter-4" bx:preset="inner-shadow 1 0 0 10 0.5 #ffc082" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="10"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1"/>
          </feComponentTransfer>
          <feFlood flood-color="#ffc082" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <filter id="sharpen-filter-0" bx:preset="sharpen 1 0.4" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feConvolveMatrix order="3" kernelMatrix="-4,-4,-4,-4,33,-4,-4,-4,-4"/>
        </filter>
        <filter id="inner-shadow-filter-2" bx:preset="inner-shadow 1 0 0 3 0.5 rgba(0,0,0,0.7)" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="3"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1"/>
          </feComponentTransfer>
          <feFlood flood-color="rgba(0,0,0,0.7)" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
        <filter id="sharpen-filter-1" bx:preset="sharpen 1 0" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feConvolveMatrix order="3" kernelMatrix="0,0,0,0,1,0,0,0,0"/>
        </filter>
        <filter id="inner-shadow-filter-3" bx:preset="inner-shadow 1 0 0 10 0.5 rgba(0,0,0,0.7)" color-interpolation-filters="sRGB" x="-50%" y="-50%" width="200%" height="200%">
          <feOffset dx="0" dy="0"/>
          <feGaussianBlur stdDeviation="10"/>
          <feComposite operator="out" in="SourceGraphic"/>
          <feComponentTransfer result="choke">
            <feFuncA type="linear" slope="1"/>
          </feComponentTransfer>
          <feFlood flood-color="rgba(0,0,0,0.7)" result="color"/>
          <feComposite operator="in" in="color" in2="choke" result="shadow"/>
          <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
        </filter>
      </defs>
      <path style="fill: rgb(106, 46, 27); stroke: rgb(106, 46, 27); filter: url(&quot;#inner-shadow-filter-1&quot;);" d="M 17.441 82.386 L 7.734 90.855 L 7.728 298.338 L 456.44 298.498 L 469.424 291.817 L 469.699 82.928 L 17.441 82.386 Z" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
      <rect x="16.926" y="82.746" width="452.201" height="209.272" style="stroke-width: 1; fill: rgb(212, 107, 56); stroke: rgb(212, 107, 56); filter: url(&quot;#inner-shadow-filter-0&quot;);" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
      <rect x="31.79" y="91.737" width="422.245" height="190.503" style="stroke: rgb(4, 34, 13); fill: url(&quot;#gradient-0&quot;); filter: url(&quot;#morphology-filter-0&quot;);" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
      <rect x="42.718" y="268.953" width="72.36" height="7.014" style="stroke: rgb(0, 0, 0); fill: rgb(243, 237, 107); filter: url(&quot;#inner-shadow-filter-4&quot;) url(&quot;#sharpen-filter-0&quot;);" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
      <rect x="25.07" y="276.014" width="436.076" height="10.371" style="fill: rgb(159, 66, 34); stroke: rgb(159, 66, 34); filter: url(&quot;#inner-shadow-filter-2&quot;) url(&quot;#sharpen-filter-1&quot;);" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
      <rect x="38.381" y="255.996" width="81.439" height="14.021" style="fill: rgb(120, 52, 29); stroke: rgb(120, 52, 29); filter: url(&quot;#inner-shadow-filter-3&quot;);" transform="matrix(1, 0, 0, 1, 0, 7.105427357601002e-15)"/>
    </svg>
  </div>

  <!-- Contenedor del juego -->
  <div id="game-container" style="display: none;">
    <div class="score-display">
      Puntuación: <span id="score">0</span>
    </div>
    
    <div id="clock-area">
      ⏰ <span id="timer">00:00</span>
    </div>
    
    <div id="game-board">
      <div id="left-panel">
        <!-- Aquí se inserta el SVG de la fracción -->
      </div>
      <div id="right-panel">
        <div class="option" id="option1">1/9</div>
        <div class="option" id="option2">2/9</div>
        <div class="option" id="option3">3/9</div>
      </div>
    </div>
  </div>

  <!-- Audio -->
  <audio id="bg-music" src="../asset/music/musicaambientacion.mp3" loop></audio>
  <audio id="sound-correct" src="../asset/music/musicadeambientacion3.mp3"></audio>
  <audio id="sound-wrong" src="../asset/music/musicamabientacion.mp3"></audio>

  <script>
    // Aquí guardamos las cosas importantes del juego
    let puntuacion = 0
    let preguntaActual = 0
    let nombreJugador = ''
    let tiempoInicio = 0
    let relojJuego = null
    let listaMejores = []
    
    // Las preguntas que vamos a mostrar
    const preguntas = [
      {
        svg: `
          <svg width="200" height="200" viewBox="0 0 200 200">
            <!-- El círculo principal -->
            <circle cx="100" cy="100" r="90" fill="#eee" stroke="black" stroke-width="2"/>
            
            <!-- Las líneas que dividen el círculo en 9 partes -->
            <line x1="100" y1="100" x2="100" y2="10" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="55" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="190" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="100" y2="190" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="10" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="55" stroke="black" stroke-width="2"/>
            
            <!-- Las partes pintadas (3 de 9) -->
            <path d="M100,100 L100,10 A90,90 0 0,1 178,55 Z" fill="#4caf50" stroke="black" stroke-width="1"/>
            <path d="M100,100 L178,55 A90,90 0 0,1 190,100 Z" fill="#4caf50" stroke="black" stroke-width="1"/>
            <path d="M100,100 L190,100 A90,90 0 0,1 178,145 Z" fill="#4caf50" stroke="black" stroke-width="1"/>
          </svg>
        `,
        respuestaCorrecta: 'option3',
        respuesta: '3/9'
      },
      {
        svg: `
          <svg width="200" height="200" viewBox="0 0 200 200">
            <!-- El círculo principal -->
            <circle cx="100" cy="100" r="90" fill="#eee" stroke="black" stroke-width="2"/>
            
            <!-- Las líneas que dividen el círculo en 9 partes -->
            <line x1="100" y1="100" x2="100" y2="10" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="55" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="190" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="100" y2="190" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="10" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="55" stroke="black" stroke-width="2"/>
            
            <!-- Las partes pintadas (2 de 9) -->
            <path d="M100,100 L100,10 A90,90 0 0,1 178,55 Z" fill="#ff9800" stroke="black" stroke-width="1"/>
            <path d="M100,100 L178,55 A90,90 0 0,1 190,100 Z" fill="#ff9800" stroke="black" stroke-width="1"/>
          </svg>
        `,
        respuestaCorrecta: 'option2',
        respuesta: '2/9'
      },
      {
        svg: `
          <svg width="200" height="200" viewBox="0 0 200 200">
            <!-- El círculo principal -->
            <circle cx="100" cy="100" r="90" fill="#eee" stroke="black" stroke-width="2"/>
            
            <!-- Las líneas que dividen el círculo en 9 partes -->
            <line x1="100" y1="100" x2="100" y2="10" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="55" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="190" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="178" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="100" y2="190" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="145" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="10" y2="100" stroke="black" stroke-width="2"/>
            <line x1="100" y1="100" x2="22" y2="55" stroke="black" stroke-width="2"/>
            
            <!-- La parte pintada (1 de 9) -->
            <path d="M100,100 L100,10 A90,90 0 0,1 178,55 Z" fill="#2196f3" stroke="black" stroke-width="1"/>
          </svg>
        `,
        respuestaCorrecta: 'option1',
        respuesta: '1/9'
      }
    ]

    // Cuando la página se carga, hacemos esto
    document.addEventListener('DOMContentLoaded', () => {
      cargarRanking()
      prepararPantallaBienvenida()
      const btnRanking = document.getElementById('ranking-btn')
      if (btnRanking) {
        btnRanking.addEventListener('click', () => {
          // Mostramos la pantalla de ranking aunque no hayas jugado
          mostrarPantallaFinal(puntuacion, Math.floor((Date.now() - tiempoInicio) / 1000))
        })
      }
    })

    // Preparar la pantalla donde el jugador pone su nombre
    function prepararPantallaBienvenida() {
      const entradaNombre = document.getElementById('player-name')
      const botonComenzar = document.getElementById('start-game')
      const botonRanking = document.getElementById('ranking-btn')
      
      entradaNombre.addEventListener('input', (e) => {
        const nombre = e.target.value.trim()
        botonComenzar.disabled = nombre.length < 2
        
        // Solo permitir letras, números y espacios
        const nombreValido = nombre.replace(/[^A-Za-z0-9\s]/g, '')
        e.target.value = nombreValido
      })
      
      botonComenzar.addEventListener('click', comenzarJuego)
      
      // BOTÓN DE RANKING (puedes quitar este bloque si no lo necesitas)
      botonRanking.addEventListener('click', () => {
        // Mostramos la pantalla de ranking desde la bienvenida
        mostrarPantallaRanking()
      })
    }

    // Empezar el juego
    function comenzarJuego() {
      nombreJugador = document.getElementById('player-name').value.trim()
      if (nombreJugador.length < 2) return
      
      // Esconder la pantalla de bienvenida
      document.getElementById('welcome-screen').style.display = 'none'
      document.getElementById('game-container').style.display = 'flex'
      
      // Empezar a contar el tiempo
      tiempoInicio = Date.now()
      actualizarReloj()
      relojJuego = setInterval(actualizarReloj, 1000)
      
      // Mostrar la primera pregunta
      cargarPregunta()
      prepararSonidos()
    }

    // Actualizar el reloj que muestra el tiempo
    function actualizarReloj() {
      const tiempoTranscurrido = Math.floor((Date.now() - tiempoInicio) / 1000)
      const minutos = Math.floor(tiempoTranscurrido / 60)
      const segundos = tiempoTranscurrido % 60
      document.getElementById('timer').textContent = 
        `${minutos.toString().padStart(2, '0')}:${segundos.toString().padStart(2, '0')}`
    }

    // Mostrar una pregunta
    function cargarPregunta() {
      if (preguntaActual >= preguntas.length) {
        terminarJuego()
        return
      }
      
      const pregunta = preguntas[preguntaActual]
      const panelIzquierdo = document.getElementById('left-panel')
      panelIzquierdo.innerHTML = pregunta.svg
      
      // Limpiar las opciones anteriores
      document.querySelectorAll('.option').forEach(opcion => {
        opcion.classList.remove('correct', 'wrong')
        opcion.style.pointerEvents = 'auto'
      })
    }

    // Preparar los sonidos del juego
    function prepararSonidos() {
      const musicaFondo = document.getElementById('bg-music')
      const sonidoCorrecto = document.getElementById('sound-correct')
      const sonidoIncorrecto = document.getElementById('sound-wrong')
      
      musicaFondo.volume = 0.3
      musicaFondo.play().catch(e => console.log('No se pudo reproducir la música'))
      
      sonidoCorrecto.volume = 0.5
      sonidoIncorrecto.volume = 0.5
    }

    // Cuando el jugador hace clic en una opción
    document.querySelectorAll('.option').forEach(opcion => {
      opcion.addEventListener('click', e => {
        const id = e.currentTarget.id
        const pregunta = preguntas[preguntaActual]
        
        if (id === pregunta.respuestaCorrecta) {
          manejarRespuestaCorrecta(e.currentTarget)
        } else {
          manejarRespuestaIncorrecta(e.currentTarget, pregunta.respuestaCorrecta)
        }
      })
    })

    // Cuando la respuesta es correcta
    function manejarRespuestaCorrecta(opcionSeleccionada) {
      document.getElementById('sound-correct').play()
      opcionSeleccionada.classList.add('correct')
      puntuacion += 10
      document.getElementById('score').textContent = puntuacion
      animarReloj('green')
      
      setTimeout(() => {
        preguntaActual++
        cargarPregunta()
      }, 1500)
    }

    // Cuando la respuesta es incorrecta
    function manejarRespuestaIncorrecta(opcionSeleccionada, opcionCorrectaId) {
      document.getElementById('sound-wrong').play()
      opcionSeleccionada.classList.add('wrong')
      document.getElementById(opcionCorrectaId).classList.add('correct')
      animarReloj('red')
      
      // No permitir más clics
      document.querySelectorAll('.option').forEach(opcion => {
        opcion.style.pointerEvents = 'none'
      })
      
      setTimeout(() => {
        preguntaActual++
        cargarPregunta()
      }, 2000)
    }

    // Hacer que el reloj se anime cuando respondes
    function animarReloj(color) {
      const reloj = document.getElementById('clock-area')
      reloj.style.color = color
      reloj.classList.add('pulse')
      setTimeout(() => reloj.classList.remove('pulse'), 1000)
    }

    // Terminar el juego
    function terminarJuego() {
      clearInterval(relojJuego)
      const tiempoJuego = Math.floor((Date.now() - tiempoInicio) / 1000)
      
      // Guardar el resultado
      guardarResultado(nombreJugador, puntuacion, tiempoJuego)
      
      // Mostrar la pantalla final
      mostrarPantallaFinal(puntuacion, tiempoJuego)
    }

    // Mostrar la pantalla cuando termina el juego
    function mostrarPantallaFinal(puntuacion, tiempo) {
      const contenedorJuego = document.getElementById('game-container')
      const minutos = Math.floor(tiempo / 60)
      const segundos = tiempo % 60
      const tiempoTexto = `${minutos}:${segundos.toString().padStart(2, '0')}`
      
      contenedorJuego.innerHTML = `
        <div class="end-game-screen">
          <h1 class="end-game-title">¡Juego Terminado!</h1>
          <div class="end-game-score">Puntuación: ${puntuacion}</div>
          <div class="end-game-time">Tiempo: ${tiempoTexto}</div>
          
          <div class="ranking-container">
            <h2 class="ranking-title">🏆 TABLERO DE LA FAMA</h2>
            ${generarHTMLRanking()}
          </div>
          
          <button onclick="location.reload()" class="end-game-button">Jugar de Nuevo</button>
          <button onclick="window.location.href='juego.html'" class="end-game-button">Volver al Menú</button>
        </div>
      `
    }

        // Crear la lista de mejores jugadores del nivel FÁCIL
    function generarHTMLRanking() {
      // Solo obtener ranking del nivel FÁCIL
      const rankingFacil = JSON.parse(localStorage.getItem('facilRanking') || '[]')
      
      let html = ''
      
      if (rankingFacil.length > 0) {
        html += rankingFacil.slice(0, 5).map((jugador, indice) => {
          const minutos = Math.floor(jugador.time / 60)
          const segundos = jugador.time % 60
          const tiempoTexto = `${minutos}:${segundos.toString().padStart(2, '0')}`
          const medalla = indice === 0 ? '🥇' : indice === 1 ? '🥈' : indice === 2 ? '🥉' : '🏅'
          const posicion = indice === 0 ? '1er Lugar' : indice === 1 ? '2do Lugar' : indice === 2 ? '3er Lugar' : `${indice + 1}° Lugar`
          return `
            <div class="ranking-item" style="border-left: 0.5vw solid #4CAF50;">
              ${medalla} ${posicion} - <strong>${jugador.name}</strong> - ${jugador.score} puntos (${tiempoTexto})
            </div>
          `
        }).join('')
      } else {
        html += '<div class="ranking-item" style="text-align: center; font-size: 2.5vw;">🌟 ¡Sé el primero en aparecer aquí! 🌟</div>'
      }
      
      return html
    }

    // Guardar el resultado en la memoria del navegador
    function guardarResultado(nombre, puntuacion, tiempo) {
      const resultado = { name: nombre, score: puntuacion, time: tiempo, date: new Date().toISOString() }
      
      // Obtener la lista de mejores jugadores del nivel FÁCIL
      const rankingExistente = JSON.parse(localStorage.getItem('facilRanking') || '[]')
      
      // Agregar el nuevo resultado
      rankingExistente.push(resultado)
      
      // Ordenar por puntuación (más puntos primero) y tiempo (más rápido primero)
      rankingExistente.sort((a, b) => {
        if (b.score !== a.score) return b.score - a.score
        return a.time - b.time
      })
      
      // Mantener solo los 10 mejores del nivel FÁCIL
      const mejores10 = rankingExistente.slice(0, 10)
      
      // Guardar en la memoria
      localStorage.setItem('facilRanking', JSON.stringify(mejores10))
      listaMejores = mejores10
    }

    // Cargar la lista de mejores jugadores del nivel FÁCIL
    function cargarRanking() {
      listaMejores = JSON.parse(localStorage.getItem('facilRanking') || '[]')
    }

    // Mostrar solo la pantalla de ranking (sin jugar)
    function mostrarPantallaRanking() {
      // Esconder la pantalla de bienvenida
      document.getElementById('welcome-screen').style.display = 'none'
      
      // Crear pantalla de ranking
      const rankingScreen = document.createElement('div')
      rankingScreen.className = 'end-game-screen'
      rankingScreen.innerHTML = `
        <h1 class="end-game-title">🏆 TABLERO DE LA FAMA</h1>
        
        <div class="ranking-container">
          ${generarHTMLRanking()}
        </div>
        
        <button onclick="location.reload()" class="end-game-button">Volver</button>
      `
      document.body.appendChild(rankingScreen)
    }

    // FUNCIÓN PARA AGREGAR CONTENIDO AL LOCALSTORAGE (puedes quitar este bloque)
    function agregarDatosPrueba() {
      // Datos de ejemplo para el nivel FÁCIL
      const datosFacil = [
        { name: 'Ana', score: 30, time: 85, date: new Date().toISOString() },
        { name: 'Carlos', score: 20, time: 120, date: new Date().toISOString() },
        { name: 'María', score: 10, time: 180, date: new Date().toISOString() }
      ]
      
      // Datos de ejemplo para el nivel INTERMEDIO
      const datosIntermedio = [
        { name: 'Pedro', score: 25, time: 150, date: new Date().toISOString() },
        { name: 'Laura', score: 15, time: 195, date: new Date().toISOString() },
        { name: 'Juan', score: 5, time: 260, date: new Date().toISOString() }
      ]
      
      // Datos de ejemplo para el nivel DIFÍCIL
      const datosDificil = [
        { name: 'Sofía', score: 20, time: 225, date: new Date().toISOString() },
        { name: 'Diego', score: 10, time: 270, date: new Date().toISOString() },
        { name: 'Carmen', score: 5, time: 315, date: new Date().toISOString() }
      ]
      
      // Guardar en localStorage
      localStorage.setItem('facilRanking', JSON.stringify(datosFacil))
      localStorage.setItem('intermedioRanking', JSON.stringify(datosIntermedio))
      localStorage.setItem('dificilRanking', JSON.stringify(datosDificil))
      
      console.log('Datos de prueba agregados al localStorage')
    }

    // Para agregar datos de prueba, ejecuta esto en la consola del navegador:
    // agregarDatosPrueba()
  </script>
</body>
</html>
